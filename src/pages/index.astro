---
import { concursantesData } from '../data/concursantes';
import ConcursanteCard from '../components/ConcursanteCard.astro';
import ModalWrapper from '../components/ModalWrapper.jsx';
import ResetButton from '../components/ResetButton.jsx';
import ScoreDisplay from '../components/ScoreDisplay.jsx';
import ExpelledToggle from '../components/ExpelledToggle.astro';
import '../styles/global.css';

const mostrarExpulsados = true; // controlado por tu botÃ³n

const listaParaRenderizar = mostrarExpulsados
  ? concursantesData
  : concursantesData.filter(c => c.estado !== 'expulsado');
---

<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>OT Votaciones</title>
  </head>
  <body class="min-h-screen bg-gray-900 p-8 relative">
    <main class="max-w-6xl mx-auto lg:pr-80">
      <h1 class="text-5xl font-extrabold text-indigo-700 mb-10 text-center">
        Votaciones de OT
      </h1>

      <div class="mb-8 flex justify-center">
        <ResetButton client:load />
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {listaParaRenderizar.map((concursante) => (
          <ModalWrapper client:load concursante={concursante}>
            <ConcursanteCard
              id={concursante.id}
              nombre={concursante.nombre}
              estado={concursante.estado}
              imagen={concursante.imagen}
            />
          </ModalWrapper>
        ))}
      </div>
    </main>

    <!-- Sidebar fijo a la derecha -->
    <div class="fixed top-16 right-4 z-[70] md:top-4">
      <ScoreDisplay client:load />
    </div>
  </body>
</html>
